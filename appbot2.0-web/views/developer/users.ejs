<%- include('partials/navbar') %>
<link rel="stylesheet" href="/developer/users.css">

<div class="dev-wrapper">
  <aside class="dev-sidebar">
    <h2>🛠️ Dev Panel</h2>
    <ul>
      <li><a href="/developer/dashboard">📊 Dashboard</a></li>
      <li><a href="/developer/servers">🌐 Servers</a></li>
      <li><a href="/developer/users">👥 Users</a></li>
      <li><a href="/developer/dev-users">🔑 Dev Users</a></li>
      <li><a href="/dashboard">↩️ Back to User Panel</a></li>
    </ul>
  </aside>

  <main class="dev-content">
    <h1>👥 Users</h1>

    <div class="user-controls">
      <a href="/developer/users/add" class="btn btn-primary">➕ Add User</a>
    </div>

    <table class="user-table">
<thead>
  <tr>
    <th>User ID</th>
    <th>Server ID</th> <!-- NEW -->
    <th>Plan</th>
    <th>Start Date</th>
    <th>Expiration Date</th>
    <th>Actions</th>
  </tr>
</thead>
<tbody>
  <% users.forEach(user => { %>
    <tr>
      <td><%= user.user_id %></td>
      <td><%= user.server_id || 'N/A' %></td> <!-- NEW -->
      <td><%= user.plan %></td>
      <td><%= new Date(user.start_date).toLocaleString() %></td>
      <td><%= new Date(user.expiration_date).toLocaleString() %></td>
      <td class="actions">
        <a href="/developer/users/<%= user.id %>/edit" class="btn btn-edit">✏️</a>
        <form action="/developer/users/<%= user.id %>/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this user?');" style="display:inline;">
          <button class="btn btn-delete">🗑️</button>
        </form>
      </td>
    </tr>
  <% }) %>
</tbody>
    </table>
  </main>
</div>
