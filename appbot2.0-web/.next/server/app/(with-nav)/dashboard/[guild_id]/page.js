(()=>{var e={};e.id=979,e.ids=[979],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2862:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>l});var o=a(50482),s=a(69108),r=a(62563),n=a.n(r),i=a(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let l=["",{children:["(with-nav)",{children:["dashboard",{children:["[guild_id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,56116)),"C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\(with-nav)\\dashboard\\[guild_id]\\page.jsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,95037)),"C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\(with-nav)\\dashboard\\[guild_id]\\layout.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,75603)),"C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\(with-nav)\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,51965)),"C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\(with-nav)\\dashboard\\[guild_id]\\page.jsx"],u="/(with-nav)/dashboard/[guild_id]/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new o.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(with-nav)/dashboard/[guild_id]/page",pathname:"/dashboard/[guild_id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9430:(e,t,a)=>{Promise.resolve().then(a.bind(a,74262)),Promise.resolve().then(a.bind(a,12799))},15709:(e,t,a)=>{Promise.resolve().then(a.bind(a,13928))},90978:(e,t)=>{"use strict";function a(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},13928:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var o=a(95344),s=a(8428),r=a(3729),n=a(90978),i=a.n(n),d=a(26033),l=a.n(d),c=a(47674);function u({children:e}){let{data:t,status:a}=(0,c.useSession)(),n=(0,s.useRouter)();return((0,r.useEffect)(()=>{"unauthenticated"===a&&n.push("/home")},[a,n]),"loading"===a)?o.jsx("p",{children:"Loading..."}):t?e:null}function p(){let{guild_id:e}=(0,s.useParams)(),t=(0,s.useRouter)(),[a,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[p,h]=(0,r.useState)(""),[_,m]=(0,r.useState)(null),[b,f]=(0,r.useState)([]),[x,D]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[C,w]=(0,r.useState)(null),[P,B]=(0,r.useState)([]),[N,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async function(){try{let t=await fetch("/api/developer/current-user"),a=t.ok?await t.json():null;w(a);let o=await fetch("/api/developer/plans"),s=o.ok?await o.json():[];if(B(s),e){let t=await fetch(`/api/forms/${e}`),a=t.ok?await t.json():[];n(a);let o=await fetch(`/api/forms/${e}/channels`),s=o.ok?await o.json():[];f(s)}}catch(e){console.error("Failed to fetch initial data",e)}})()},[e]);let S=(C?.plan||"Free").trim().toLowerCase(),A=P.find(e=>e.name.trim().toLowerCase()===S),O=A?.max_forms||1,E=async()=>{if(y(""),p.trim()&&x){if(a.length>=O){k(!0);return}try{let t=await fetch(`/api/forms/${e}/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:p,log_channel_id:x})});if(t.ok){let e=await t.json();n(t=>[...t,e]),h(""),D(""),c(!1)}else{let e=await t.text();y("Failed to create form: "+e)}}catch(e){console.error("Error creating form:",e),y("Error creating form")}}},I=async()=>{if(_)try{let t=await fetch(`/api/forms/${e}/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:_.id})}),a=await t.json();a.success?(n(e=>e.filter(e=>e.id!==_.id)),m(null)):console.error("Delete failed:",a.error)}catch(e){console.error("❌ Delete error:",e)}};return(0,r.useEffect)(()=>{e&&(document.title=`Dashboard - ${e} - AppBot 2.0`)},[e]),o.jsx(u,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i(),{children:[(0,o.jsxs)("title",{children:["Dashboard - ",e," - AppBot 2.0"]}),o.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)("div",{className:l().containerWithSidebar,children:[(0,o.jsxs)("div",{className:l().formsHeader,children:[o.jsx("h1",{className:l().heading,children:"\uD83D\uDCCB Application Forms"}),!d&&o.jsx("button",{className:l().createButton,onClick:()=>c(!0),title:"Create New Form",children:"➕"})]}),g&&o.jsx("p",{style:{color:"red",textAlign:"center"},children:g}),d&&(0,o.jsxs)("div",{className:l().createModal,children:[o.jsx("input",{type:"text",value:p,placeholder:"Enter form name",onChange:e=>h(e.target.value),className:l().input}),(0,o.jsxs)("select",{value:x,onChange:e=>D(e.target.value),className:l().select,children:[o.jsx("option",{value:"",children:"Select Log Channel"}),b.map(e=>(0,o.jsxs)("option",{value:e.id,children:["#",e.name]},e.id))]}),o.jsx("button",{className:l().confirmButton,onClick:E,children:"✅"}),o.jsx("button",{className:l().cancelButton,onClick:()=>c(!1),children:"❌"})]}),a.map(a=>(0,o.jsxs)("div",{className:l().formCard,children:[o.jsx("span",{className:l().formTitle,children:a.title}),o.jsx("select",{className:l().selectInline,value:a.log_channel_id||"",onChange:async t=>{let o=t.target.value;(await fetch(`/api/forms/${e}/update-channel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:a.id,log_channel_id:o})})).ok?(n(e=>e.map(e=>e.id===a.id?{...e,log_channel_id:o}:e)),v("✅ Log channel updated."),setTimeout(()=>v(""),2500)):console.error("❌ Failed to update log channel")},children:b.map(e=>(0,o.jsxs)("option",{value:e.id,children:["#",e.name]},e.id))}),(0,o.jsxs)("div",{className:l().formActions,children:[o.jsx("button",{className:l().iconButton,title:"Edit",onClick:()=>t.push(`/dashboard/${e}/edit/${a.id}`),children:"✏️"}),o.jsx("button",{className:l().iconButtonDelete,title:"Delete",onClick:()=>m(a),children:"\uD83D\uDDD1️"})]})]},a.id)),_&&o.jsx("div",{className:l().modalOverlay,children:(0,o.jsxs)("div",{className:l().modal,children:[o.jsx("h3",{children:"Delete Form"}),(0,o.jsxs)("p",{children:["Are you sure you want to delete ",o.jsx("strong",{children:_.title}),"?"]}),(0,o.jsxs)("div",{className:l().modalActions,children:[o.jsx("button",{onClick:()=>m(null),children:"Cancel"}),o.jsx("button",{onClick:I,className:l().danger,children:"Yes, Delete"})]})]})}),N&&o.jsx("div",{className:l().modalBackdrop,children:(0,o.jsxs)("div",{className:l().modal,children:[(0,o.jsxs)("p",{children:["You have reached the max number of forms (",O,") allowed for your plan (",C?.plan||"Free",")."]}),o.jsx("div",{className:l().modalButtons,children:o.jsx("button",{className:l().confirm,onClick:()=>k(!1),children:"OK"})})]})})]})]})})}},26033:e=>{e.exports={heading:"Dashboard_heading__WXdpx",formTitle:"Dashboard_formTitle__Q7xzI",container:"Dashboard_container__oj949",subtext:"Dashboard_subtext__xL6KK",createButton:"Dashboard_createButton__vNIyt",formsGrid:"Dashboard_formsGrid__wv6Tm",formCard:"Dashboard_formCard__UEeRX",formActions:"Dashboard_formActions__j3Thz",edit:"Dashboard_edit__YPOJl",delete:"Dashboard_delete__G4ICV",iconButton:"Dashboard_iconButton__D97Rj",iconButtonDelete:"Dashboard_iconButtonDelete__FxMvQ",createModal:"Dashboard_createModal__vX3bk",input:"Dashboard_input__BrxKO",confirmButton:"Dashboard_confirmButton__JPiAw",cancelButton:"Dashboard_cancelButton____2HW",modalOverlay:"Dashboard_modalOverlay__BCr4E",modal:"Dashboard_modal__XNgjk",modalActions:"Dashboard_modalActions__oCavV",danger:"Dashboard_danger__ViR_F",formsHeader:"Dashboard_formsHeader__L7LXX",select:"Dashboard_select__73E6I",selectInline:"Dashboard_selectInline__T81vE",successMessage:"Dashboard_successMessage__2wmoh",modalBackdrop:"Dashboard_modalBackdrop__mrOUA",modalButtons:"Dashboard_modalButtons__LlDlI",confirm:"Dashboard_confirm__6LbdN"}},73941:e=>{e.exports={wrapper:"DashboardLayout_wrapper__kxVD8",body:"DashboardLayout_body__Dt4Qo",main:"DashboardLayout_main__MdP8K",content:"DashboardLayout_content__eC2o4",topbar:"DashboardLayout_topbar__TsClD",container:"DashboardLayout_container__DPHQq"}},95037:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(25036),s=a(94399),r=a(61410),n=a(73941),i=a.n(n);function d({children:e}){return(0,o.jsxs)("div",{className:i().wrapper,children:[o.jsx(s.ZP,{}),(0,o.jsxs)("div",{className:i().body,children:[o.jsx(r.ZP,{}),o.jsx("main",{className:i().content,children:e})]})]})}},56116:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>s,default:()=>n});let o=(0,a(86843).createProxy)(String.raw`C:\Users\oshad\OneDrive\Desktop\JS Code\WIP\AppBot2.0\appbot2.0-web\src\app\(with-nav)\dashboard\[guild_id]\page.jsx`),{__esModule:s,$$typeof:r}=o,n=o.default},61410:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>n});let o=(0,a(86843).createProxy)(String.raw`C:\Users\oshad\OneDrive\Desktop\JS Code\WIP\AppBot2.0\appbot2.0-web\src\components\DashboardSidebar.jsx`),{__esModule:s,$$typeof:r}=o,n=o.default},94399:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>n});let o=(0,a(86843).createProxy)(String.raw`C:\Users\oshad\OneDrive\Desktop\JS Code\WIP\AppBot2.0\appbot2.0-web\src\components\Topbar.jsx`),{__esModule:s,$$typeof:r}=o,n=o.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),o=t.X(0,[1638,8356,3221,6506,6477],()=>a(2862));module.exports=o})();