(()=>{var e={};e.id=829,e.ids=[829],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},62620:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(50482),a=r(69108),n=r(62563),o=r.n(n),i=r(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(no-nav)",{children:["servers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,61830)),"C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\(no-nav)\\servers\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,23458)),"C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\(no-nav)\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,51965)),"C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\oshad\\OneDrive\\Desktop\\JS Code\\WIP\\AppBot2.0\\appbot2.0-web\\src\\app\\(no-nav)\\servers\\page.jsx"],u="/(no-nav)/servers/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(no-nav)/servers/page",pathname:"/servers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},57219:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},83787:(e,t,r)=>{Promise.resolve().then(r.bind(r,49798))},86585:(e,t,r)=>{Promise.resolve().then(r.bind(r,75132))},35303:()=>{},49798:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(95344),a=r(47674);r(36271);var n=r(12799);function o({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:(0,s.jsxs)(a.SessionProvider,{children:[s.jsx(n.default,{}),e]})})})}},75132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(95344),a=r(3729),n=r(47674),o=r(8428),i=r(94126),l=r.n(i);function d(){let{data:e,status:t}=(0,n.useSession)(),r=(0,o.useRouter)(),[i,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(new Set),[p,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{document.title="Servers - AppBot2.0"},[]),(0,a.useEffect)(()=>{let e=localStorage.getItem("invited_guild");e&&h(e)},[]),(0,a.useEffect)(()=>{"unauthenticated"===t&&r.push("/home")},[t,r]);let v=async()=>{try{let t=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:`Bearer ${e?.accessToken}`}}),r=(await t.json()).filter(e=>(32&e.permissions)==32);d(r);let s=await fetch("/api/bot-guilds"),{ids:a}=await s.json(),n=new Set(a.map(e=>e.toString()));u(n)}catch(e){console.error("Guild fetch error:",e)}};if((0,a.useEffect)(()=>{if(!e?.accessToken)return;v();let t=setInterval(()=>{v()},3e3);return()=>clearInterval(t)},[e?.accessToken]),(0,a.useEffect)(()=>{if(!e?.accessToken||!p)return;let t=setInterval(async()=>{try{let e=await fetch("/api/bot-guilds"),{ids:t}=await e.json();new Set(t.map(e=>e.toString())).has(p)&&(localStorage.removeItem("invited_guild"),r.push("/servers"))}catch(e){console.error("Redirect check failed:",e)}},3e3);return()=>clearInterval(t)},[e?.accessToken,p,r]),"loading"===t)return s.jsx("p",{children:"Loading..."});if("unauthenticated"===t)return null;let m=e=>{localStorage.setItem("invited_guild",e);let t=encodeURIComponent(`${window.location.origin}/servers/invite-complete`),r=`https://discord.com/oauth2/authorize?client_id=1371929881872564294&scope=bot+applications.commands&permissions=8596544&guild_id=${e}&disable_guild_select=true&redirect_uri=${t}&response_type=code`;window.location.href=r};return s.jsx("div",{className:l().container,children:i.map(e=>{let t=e.icon?`https://cdn.discordapp.com/icons/${e.id}/${e.icon}.png`:"/default-icon.jpg",a=c.has(e.id);return(0,s.jsxs)("div",{className:l().card,children:[s.jsx("img",{src:t,alt:e.name,className:l().avatar,onError:e=>e.currentTarget.src="/default-icon.jpg"}),s.jsx("h3",{className:l().title,children:e.name}),a?s.jsx("button",{className:`${l().button} ${l().settings}`,onClick:()=>r.push(`/dashboard/${e.id}`),children:"⚙️ Settings"}):s.jsx("button",{className:`${l().button} ${l().invite}`,onClick:()=>m(e.id),children:"➕ Invite Bot"})]},e.id)})})}},12799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(95344),a=r(47674),n=r(3729),o=r(8428),i=r(94830),l=r.n(i);function d(){let{data:e,status:t}=(0,a.useSession)(),r=(0,o.useRouter)(),i=(0,o.usePathname)(),[d,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[h,v]=(0,n.useState)(!1),[m,_]=(0,n.useState)(""),[g,f]=(0,n.useState)(null),[x,b]=(0,n.useState)([]),[j,S]=(0,n.useState)(""),w=(0,n.useRef)(null),D=i?.startsWith("/developer"),P=(()=>{let e=i?.split("/");if(!e||e.length<3)return null;let[t,r,s]=e;return["dashboard","applications","settings"].includes(r)&&/^\d+$/.test(s)?s:null})();if((0,n.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{(async()=>{if(!e?.user?.id){v(!0);return}try{let t=await fetch(`/api/is-dev-user?userId=${e.user.id}`),r=await t.json();p(r.isDev||!1)}catch(e){console.error("\uD83D\uDD25 Failed to check dev access:",e)}finally{v(!0)}})()},[e?.user?.id]),(0,n.useEffect)(()=>{(async()=>{if(!P){""!==m&&_("");return}if("authenticated"===t&&e?.accessToken)try{let t=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:`Bearer ${e.accessToken}`}}),r=(await t.json()).find(e=>e.id===P);r&&_(r.name)}catch(e){console.error("⚠️ Failed to fetch guild name:",e)}})()},[P,e?.accessToken,t]),(0,n.useEffect)(()=>{(async function(){if(e?.user?.id)try{let e=await fetch("/api/developer/current-user"),t=e.ok?await e.json():null;f(t);let r=await fetch("/api/developer/plans"),s=r.ok?await r.json():[];b(s)}catch(e){console.error("Failed to fetch user or plans:",e)}})()},[e?.user?.id]),(0,n.useEffect)(()=>{if(!g?.expiration_date){S("");return}function e(){let e=new Date,t=new Date(g.expiration_date)-e;if(t<=0){S("Expired");return}let r=Math.floor(t/31536e6),s=Math.floor((t-=31536e6*r)/864e5),a=Math.floor((t-=864e5*s)/36e5),n=Math.floor((t-=36e5*a)/6e4),o=[];r>0&&o.push(`${r}y`),s>0&&o.push(`${s}d`),a>0&&o.push(`${a}h`),o.push(`${n}m`),S(o.join(", "))}e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[g?.expiration_date]),"loading"===t)return null;let y=m?`Editing Server: ${m}`:"",k=(g?.plan||"Free").trim().toLowerCase(),I=x.find(e=>e.name.trim().toLowerCase()===k);return(0,s.jsxs)("div",{className:l().topbar,children:[(0,s.jsxs)("div",{className:l().logoArea,children:[s.jsx("img",{src:"/default-icon.jpg",alt:"AppBot Logo",className:l().logoImage}),s.jsx("span",{className:l().brand,children:"AppBot2.0"})]}),(D||y)&&s.jsx("div",{className:l().centerText,children:s.jsx("span",{className:l().guildName,children:D?"Developer Panel":y})}),(0,s.jsxs)("div",{className:l().right,children:[e?.user&&s.jsx("div",{className:l().avatarWrapper,onClick:()=>c(e=>!e),children:s.jsx("img",{src:e.user.image,alt:"Profile",className:l().avatar})}),e?.user&&d&&(0,s.jsxs)("div",{className:l().dropdown,ref:w,children:[(0,s.jsxs)("div",{className:l().userInfoDropdown,children:[(0,s.jsxs)("div",{children:[s.jsx("strong",{children:"User:"})," ",g?.username||e.user.name]}),(0,s.jsxs)("div",{children:[s.jsx("strong",{children:"Plan:"})," ",I?.name||g?.plan||"Free"]}),(0,s.jsxs)("div",{children:[s.jsx("strong",{children:"Max Forms:"})," ",I?.max_forms??"N/A"]}),(0,s.jsxs)("div",{children:[s.jsx("strong",{children:"Max Questions:"})," ",I?.max_questions??"N/A"]}),(0,s.jsxs)("div",{children:[s.jsx("strong",{children:"Time Remaining:"}),s.jsx("br",{}),s.jsx("span",{children:j||"N/A"})]})]}),s.jsx("a",{href:"https://discord.gg/svHdVh2Bff",target:"_blank",rel:"noopener noreferrer",className:l().devButton,style:{textAlign:"center"},children:"\uD83D\uDD17 Join Support Server"}),"/servers"!==i&&s.jsx("button",{className:l().devButton,onClick:()=>r.push("/servers"),children:"\uD83D\uDD01 Switch Servers"}),u&&s.jsx("button",{className:l().devButton,onClick:()=>r.push("/developer/dashboard"),children:"\uD83D\uDEE0 Developer Panel"}),s.jsx("button",{className:l().logout,onClick:()=>(0,a.signOut)({callbackUrl:"/home"}),children:"\uD83D\uDCD5 Log out"})]})]})]})}},94126:e=>{e.exports={container:"Servers_container__ULee0",card:"Servers_card__lrXT5",avatar:"Servers_avatar__t5UdM",title:"Servers_title__G5X5j",button:"Servers_button__QCxAu",settings:"Servers_settings__L_dre",invite:"Servers_invite__qWc3D",navbar:"Servers_navbar__0I35Z",logoArea:"Servers_logoArea__J3Q0p",logoImage:"Servers_logoImage__lvjMI",brand:"Servers_brand__UBg11"}},94830:e=>{e.exports={topbar:"Topbar_topbar__V0QGl",right:"Topbar_right__Jj2ao",logoArea:"Topbar_logoArea__forZL",logoImage:"Topbar_logoImage__LJuRd",brand:"Topbar_brand__3hSuU",avatarWrapper:"Topbar_avatarWrapper__5Bf2P",avatar:"Topbar_avatar__Eq_S3",dropdown:"Topbar_dropdown__HJUG8",fadeIn:"Topbar_fadeIn__o0Bh1",name:"Topbar_name__eFLUk",logout:"Topbar_logout__u1BV7",devButton:"Topbar_devButton__28Bss",centerText:"Topbar_centerText__7McvY",guildName:"Topbar_guildName__av6yP",userInfoDropdown:"Topbar_userInfoDropdown__dVogq"}},23458:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});let s=(0,r(86843).createProxy)(String.raw`C:\Users\oshad\OneDrive\Desktop\JS Code\WIP\AppBot2.0\appbot2.0-web\src\app\(no-nav)\layout.jsx`),{__esModule:a,$$typeof:n}=s,o=s.default},61830:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});let s=(0,r(86843).createProxy)(String.raw`C:\Users\oshad\OneDrive\Desktop\JS Code\WIP\AppBot2.0\appbot2.0-web\src\app\(no-nav)\servers\page.jsx`),{__esModule:a,$$typeof:n}=s,o=s.default},51965:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a});var s=r(25036);let a={title:"Next.js",description:"Generated by Next.js"};function n({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:e})})}},36271:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,8356,3221],()=>r(62620));module.exports=s})();