(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{84328:function(e,a,s){Promise.resolve().then(s.bind(s,10995))},10995:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return c}});var t=s(57437),n=s(2265),l=s(45996),r=s.n(l);let i=[{label:"1 Week",value:7},{label:"1 Month",value:30},{label:"6 Months",value:182},{label:"1 Year",value:365},{label:"Developer",value:9999}],o=[{label:"1 Day",value:1},{label:"3 Days",value:3},{label:"1 Week",value:7},{label:"2 Weeks",value:14}];function c(){let[e,a]=(0,n.useState)([]),[s,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)({user_id:"",username:"",plan:"",expiration_days:7}),[p,m]=(0,n.useState)(null),[_,v]=(0,n.useState)({user_id:"",username:"",plan:"",expiration_days:7}),[x,j]=(0,n.useState)(null),[y,f]=(0,n.useState)(!1),[b,N]=(0,n.useState)(1);(0,n.useEffect)(()=>{g(),D()},[]);let g=async()=>{try{let e=await fetch("/api/developer/users");if(!e.ok)throw Error("Failed to fetch users");let s=await e.json();a(s)}catch(e){console.error("Failed to fetch users:",e)}},D=async()=>{try{let e=await fetch("/api/developer/plans");if(!e.ok)throw Error("Failed to fetch plans");let a=await e.json();l(a),h(e=>({...e,plan:e.plan||(a.length>0?a[0].name:"")})),v(e=>({...e,plan:e.plan||(a.length>0?a[0].name:"")}))}catch(e){console.error("Failed to fetch plans:",e)}},C=async()=>{let e=new Date;e.setDate(e.getDate()+parseInt(u.expiration_days)+1);try{await fetch("/api/developer/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,expiration_date:e})}),h({user_id:"",username:"",plan:s.length>0?s[0].name:"",expiration_days:7}),d(!1),g()}catch(e){console.error("Failed to add user:",e)}},w=async()=>{try{await fetch("/api/developer/users/add-time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({days:b})}),f(!1),g()}catch(e){console.error("❌ Failed to add time:",e)}},k=e=>{m(e.id),v({user_id:e.user_id,username:e.username,plan:e.plan,expiration_days:T(e.expiration_date)})},U=()=>{m(null),v({user_id:"",username:"",plan:s.length>0?s[0].name:"",expiration_days:7})},B=async e=>{let a=new Date;a.setDate(a.getDate()+parseInt(_.expiration_days)+1);try{await fetch("/api/developer/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({..._,expiration_date:a})}),U(),g()}catch(e){console.error("Failed to save edit:",e)}},S=async e=>{try{await fetch("/api/developer/users/".concat(e),{method:"DELETE"}),j(null),g()}catch(e){console.error("Failed to delete user:",e)}},T=e=>{let a=new Date;return Math.ceil((new Date(e)-a)/864e5)};return(0,t.jsxs)("div",{className:r().container,children:[(0,t.jsxs)("div",{className:r().headerRow,children:[(0,t.jsx)("h1",{className:r().header,children:"\uD83D\uDC64 Users"}),(0,t.jsxs)("div",{className:r().buttonGroup,children:[(0,t.jsx)("button",{className:r().addButton,onClick:()=>f(!0),children:"\uD83D\uDD52 Add Time"}),!c&&(0,t.jsx)("button",{className:r().addButton,onClick:()=>d(!0),title:"Add User",children:"➕"})]})]}),y&&(0,t.jsxs)("div",{className:r().formRow,children:[(0,t.jsx)("select",{value:b,onChange:e=>N(parseInt(e.target.value)),children:o.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsxs)("div",{className:r().formActions,children:[(0,t.jsx)("button",{className:r().saveButton,onClick:w,children:"✅"}),(0,t.jsx)("button",{className:r().cancelButton,onClick:()=>f(!1),children:"❌"})]})]}),c&&(0,t.jsxs)("div",{className:r().formRow,children:[(0,t.jsx)("input",{type:"text",placeholder:"Username",value:u.username,onChange:e=>h({...u,username:e.target.value})}),(0,t.jsx)("input",{type:"text",placeholder:"Discord User ID",value:u.user_id,onChange:e=>h({...u,user_id:e.target.value})}),(0,t.jsx)("select",{value:u.plan,onChange:e=>h({...u,plan:e.target.value}),children:s.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.name))}),(0,t.jsx)("select",{value:u.expiration_days,onChange:e=>h({...u,expiration_days:e.target.value}),children:i.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsxs)("div",{className:r().formActions,children:[(0,t.jsx)("button",{className:r().saveButton,onClick:C,children:"✅"}),(0,t.jsx)("button",{className:r().cancelButton,onClick:()=>d(!1),children:"❌"})]})]}),(0,t.jsxs)("div",{className:r().userTable,children:[e.map(e=>(0,t.jsx)("div",{className:r().userRow,children:p===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"text",value:_.username,onChange:e=>v({..._,username:e.target.value}),className:r().input}),(0,t.jsx)("input",{type:"text",value:_.user_id,onChange:e=>v({..._,user_id:e.target.value}),className:r().input}),(0,t.jsx)("select",{value:_.plan,onChange:e=>v({..._,plan:e.target.value}),className:r().input,children:s.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.name))}),(0,t.jsx)("select",{value:_.expiration_days,onChange:e=>v({..._,expiration_days:e.target.value}),className:r().input,children:i.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsxs)("div",{className:r().actions,children:[(0,t.jsx)("button",{onClick:()=>B(e.id),children:"✅"}),(0,t.jsx)("button",{onClick:U,children:"❌"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:r().cell,children:e.username}),(0,t.jsx)("div",{className:r().cell,children:(0,t.jsx)("code",{children:e.user_id})}),(0,t.jsx)("div",{className:r().cell,children:e.plan}),(0,t.jsx)("div",{className:r().cell,children:new Date(e.expiration_date).toLocaleDateString()}),(0,t.jsxs)("div",{className:r().actions,children:[(0,t.jsx)("button",{title:"Edit",onClick:()=>k(e),children:"✏️"}),(0,t.jsx)("button",{title:"Delete",onClick:()=>j(e.id),children:"\uD83D\uDDD1️"})]})]})},e.id)),x&&(0,t.jsx)("div",{className:r().modalBackdrop,children:(0,t.jsxs)("div",{className:r().modal,children:[(0,t.jsx)("p",{children:"Are you sure you want to delete this user?"}),(0,t.jsxs)("div",{className:r().modalButtons,children:[(0,t.jsx)("button",{onClick:()=>S(x),children:"✅ Confirm"}),(0,t.jsx)("button",{onClick:()=>j(null),children:"❌ Cancel"})]})]})})]})]})}},45996:function(e){e.exports={container:"Users_container___Q0Bg",header:"Users_header__Z5KvA",addButton:"Users_addButton__mK9xg",formRow:"Users_formRow__SpIks",saveButton:"Users_saveButton__tDgVe",cancelButton:"Users_cancelButton__ITxer",userTable:"Users_userTable__5EcAV",userRow:"Users_userRow__W9Sps",cell:"Users_cell___AXa0",actions:"Users_actions__iede8",headerRow:"Users_headerRow__D72tJ",formActions:"Users_formActions__SWu__",modalBackdrop:"Users_modalBackdrop__FgDT5",modal:"Users_modal__udAH5",modalButtons:"Users_modalButtons__Xf2Hh",buttonGroup:"Users_buttonGroup__K2MmI"}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=84328)}),_N_E=e.O()}]);