(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626,152],{85568:function(e,a,r){Promise.resolve().then(r.bind(r,24768))},24768:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return c}});var n=r(57437),t=r(2265),s=r(47907),o=r(40291),l=r(43152),i=r(906),d=r.n(i);function c(){let{id:e}=(0,s.useParams)(),a=(0,s.useRouter)(),[r,i]=(0,t.useState)(null),[c,u]=(0,t.useState)(""),[h,v]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{(async function(){try{let a=await fetch("/api/developer/feedback/".concat(e));if(!a.ok)throw Error("Failed to fetch feedback");let r=await a.json();i(r)}catch(e){u(e.message)}finally{v(!1)}})()},[e]),h)?(0,n.jsx)("p",{className:d().loading,children:"Loading feedback..."}):c?(0,n.jsx)("p",{className:d().error,children:c}):r?(0,n.jsxs)("div",{className:d().container,children:[(0,n.jsx)(o.Z,{}),(0,n.jsxs)("div",{className:d().mainContent,children:[(0,n.jsx)(l.default,{}),(0,n.jsx)("h1",{className:d().title,children:"\uD83E\uDDD1‍\uD83D\uDCBB Feedback Detail"}),(0,n.jsxs)("div",{className:d().detailCard,children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"User:"})," ",r.username]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Server:"})," ",r.guild_name||"Unknown"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Submitted:"})," ",new Date(r.submitted_at).toLocaleString()]}),(0,n.jsx)("div",{className:d().feedbackText,children:r.feedback}),(0,n.jsx)("button",{className:d().backButton,onClick:()=>a.back(),children:"← Back"})]})]})]}):(0,n.jsx)("p",{className:d().error,children:"Feedback not found"})}},40291:function(e,a,r){"use strict";r.d(a,{Z:function(){return i}});var n=r(57437),t=r(8792),s=r(47907),o=r(65515),l=r.n(o);function i(){let e=(0,s.usePathname)();return(0,n.jsx)("div",{className:l().sidebar,children:[{href:"/developer",label:"\uD83D\uDCCA Dashboard"},{href:"/developer/servers",label:"\uD83D\uDEE1 Servers"},{href:"/developer/users",label:"\uD83D\uDC65 Users"},{href:"/developer/dev-users",label:"\uD83E\uDDE0 Dev Users"},{href:"/developer/feedback",label:"\uD83D\uDCAC Feedback"},{href:"/servers",label:"\uD83D\uDD19 Back to User Panel"}].map(a=>(0,n.jsx)(t.default,{href:a.href,className:"".concat(l().link," ").concat(e===a.href?l().active:""),children:a.label},a.href))})}},43152:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return d}});var n=r(57437),t=r(71126),s=r(2265),o=r(47907),l=r(83041),i=r.n(l);function d(){var e,a,r,l;let{data:d,status:c}=(0,t.useSession)(),u=(0,o.useRouter)(),h=(0,o.usePathname)(),[v,f]=(0,s.useState)(!1),[_,p]=(0,s.useState)(!1),[b,m]=(0,s.useState)(!1),[x,D]=(0,s.useState)(""),[j,g]=(0,s.useState)(null),[k,w]=(0,s.useState)([]),[N,S]=(0,s.useState)(""),T=(0,s.useRef)(null),C=null==h?void 0:h.startsWith("/developer"),E=(()=>{let e=null==h?void 0:h.split("/");if(!e||e.length<3)return null;let[a,r,n]=e;return["dashboard","applications","settings"].includes(r)&&/^\d+$/.test(n)?n:null})();if((0,s.useEffect)(()=>{let e=e=>{T.current&&!T.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{(async()=>{var e;if(!(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id)){m(!0);return}try{let e=await fetch("/api/is-dev-user?userId=".concat(d.user.id)),a=await e.json();p(a.isDev||!1)}catch(e){console.error("\uD83D\uDD25 Failed to check dev access:",e)}finally{m(!0)}})()},[null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id]),(0,s.useEffect)(()=>{(async()=>{if(!E){""!==x&&D("");return}if("authenticated"===c&&(null==d?void 0:d.accessToken))try{let e=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:"Bearer ".concat(d.accessToken)}}),a=(await e.json()).find(e=>e.id===E);a&&D(a.name)}catch(e){console.error("⚠️ Failed to fetch guild name:",e)}})()},[E,null==d?void 0:d.accessToken,c]),(0,s.useEffect)(()=>{(async function(){var e;if(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id)try{let e=await fetch("/api/developer/current-user"),a=e.ok?await e.json():null;g(a);let r=await fetch("/api/developer/plans"),n=r.ok?await r.json():[];w(n)}catch(e){console.error("Failed to fetch user or plans:",e)}})()},[null==d?void 0:null===(a=d.user)||void 0===a?void 0:a.id]),(0,s.useEffect)(()=>{if(!(null==j?void 0:j.expiration_date)){S("");return}function e(){let e=new Date,a=new Date(j.expiration_date)-e;if(a<=0){S("Expired");return}let r=Math.floor(a/31536e6),n=Math.floor((a-=31536e6*r)/864e5),t=Math.floor((a-=864e5*n)/36e5),s=Math.floor((a-=36e5*t)/6e4),o=[];r>0&&o.push("".concat(r,"y")),n>0&&o.push("".concat(n,"d")),t>0&&o.push("".concat(t,"h")),o.push("".concat(s,"m")),S(o.join(", "))}e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[null==j?void 0:j.expiration_date]),"loading"===c)return null;let B=x?"Editing Server: ".concat(x):"",F=((null==j?void 0:j.plan)||"Free").trim().toLowerCase(),V=k.find(e=>e.name.trim().toLowerCase()===F);return(0,n.jsxs)("div",{className:i().topbar,children:[(0,n.jsxs)("div",{className:i().logoArea,children:[(0,n.jsx)("img",{src:"/default-icon.jpg",alt:"AppBot Logo",className:i().logoImage}),(0,n.jsx)("span",{className:i().brand,children:"AppBot2.0"})]}),(C||B)&&(0,n.jsx)("div",{className:i().centerText,children:(0,n.jsx)("span",{className:i().guildName,children:C?"Developer Panel":B})}),(0,n.jsxs)("div",{className:i().right,children:[(null==d?void 0:d.user)&&(0,n.jsx)("div",{className:i().avatarWrapper,onClick:()=>f(e=>!e),children:(0,n.jsx)("img",{src:d.user.image,alt:"Profile",className:i().avatar})}),(null==d?void 0:d.user)&&v&&(0,n.jsxs)("div",{className:i().dropdown,ref:T,children:[(0,n.jsxs)("div",{className:i().userInfoDropdown,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"User:"})," ",(null==j?void 0:j.username)||d.user.name]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Plan:"})," ",(null==V?void 0:V.name)||(null==j?void 0:j.plan)||"Free"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Forms:"})," ",null!==(r=null==V?void 0:V.max_forms)&&void 0!==r?r:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Questions:"})," ",null!==(l=null==V?void 0:V.max_questions)&&void 0!==l?l:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Time Remaining:"}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:N||"N/A"})]})]}),(0,n.jsx)("a",{href:"https://discord.gg/svHdVh2Bff",target:"_blank",rel:"noopener noreferrer",className:i().devButton,style:{textAlign:"center"},children:"\uD83D\uDD17 Join Support Server"}),"/servers"!==h&&(0,n.jsx)("button",{className:i().devButton,onClick:()=>u.push("/servers"),children:"\uD83D\uDD01 Switch Servers"}),_&&(0,n.jsx)("button",{className:i().devButton,onClick:()=>u.push("/developer/dashboard"),children:"\uD83D\uDEE0 Developer Panel"}),(0,n.jsx)("button",{className:i().logout,onClick:()=>(0,t.signOut)({callbackUrl:"/home"}),children:"\uD83D\uDCD5 Log out"})]})]})]})}},906:function(e){e.exports={container:"FeedbackView_container__XShzf",mainContent:"FeedbackView_mainContent__40kJ3",title:"FeedbackView_title__KsG7a",detailCard:"FeedbackView_detailCard__rkGqP",feedbackText:"FeedbackView_feedbackText__j5F4F",backButton:"FeedbackView_backButton__V1WOu",error:"FeedbackView_error__4_ROi",loading:"FeedbackView_loading__6q3VY"}},65515:function(e){e.exports={sidebar:"DevSidebar_sidebar__qHBa4",link:"DevSidebar_link__oek2p",active:"DevSidebar_active__0v92e",containerWithSidebar:"DevSidebar_containerWithSidebar__XnQA3"}},83041:function(e){e.exports={topbar:"Topbar_topbar__V0QGl",right:"Topbar_right__Jj2ao",logoArea:"Topbar_logoArea__forZL",logoImage:"Topbar_logoImage__LJuRd",brand:"Topbar_brand__3hSuU",avatarWrapper:"Topbar_avatarWrapper__5Bf2P",avatar:"Topbar_avatar__Eq_S3",dropdown:"Topbar_dropdown__HJUG8",fadeIn:"Topbar_fadeIn__o0Bh1",name:"Topbar_name__eFLUk",logout:"Topbar_logout__u1BV7",devButton:"Topbar_devButton__28Bss",centerText:"Topbar_centerText__7McvY",guildName:"Topbar_guildName__av6yP",userInfoDropdown:"Topbar_userInfoDropdown__dVogq"}}},function(e){e.O(0,[126,901,971,69,744],function(){return e(e.s=85568)}),_N_E=e.O()}]);