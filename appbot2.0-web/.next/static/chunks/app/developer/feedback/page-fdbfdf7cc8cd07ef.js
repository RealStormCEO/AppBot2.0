(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240,152],{94551:function(e,a,n){Promise.resolve().then(n.bind(n,60405))},60405:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return _}});var t=n(57437),r=n(2265),o=n(47907),l=n(40291),s=n(43152),i=n(47744),c=n.n(i);function d(e){let{message:a,onConfirm:n,onCancel:r}=e;return(0,t.jsx)("div",{className:c().backdrop,children:(0,t.jsxs)("div",{className:c().modal,children:[(0,t.jsx)("p",{children:a}),(0,t.jsxs)("div",{className:c().buttons,children:[(0,t.jsx)("button",{className:c().confirmBtn,onClick:n,children:"✅ Confirm"}),(0,t.jsx)("button",{className:c().cancelBtn,onClick:r,children:"❌ Cancel"})]})]})})}var u=n(41182),v=n.n(u);function _(){let e=(0,o.useRouter)(),[a,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(""),[u,_]=(0,r.useState)(!1),[f,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{p()},[]);let p=async()=>{_(!0);try{let e=await fetch("/api/developer/feedback");if(e.ok){let a=await e.json();n(a)}else c("Failed to fetch feedback.")}catch(e){c("Failed to fetch feedback.")}_(!1)},b=a=>{e.push("/developer/feedback/".concat(a))},m=async e=>{try{(await fetch("/api/developer/feedback/".concat(e),{method:"DELETE"})).ok?n(a=>a.filter(a=>a.id!==e)):alert("Failed to delete feedback.")}catch(e){alert("Failed to delete feedback.")}h(null)};return(0,t.jsxs)("div",{className:v().container,children:[(0,t.jsx)(l.Z,{}),(0,t.jsxs)("div",{className:v().mainContent,children:[(0,t.jsx)(s.default,{}),(0,t.jsx)("h1",{className:v().title,children:"\uD83E\uDDD1‍\uD83D\uDCBB Developer Feedback"}),i&&(0,t.jsx)("p",{className:v().error,children:i}),u&&(0,t.jsx)("p",{children:"Loading feedback..."}),(0,t.jsx)("div",{className:v().feedbackList,children:a.map(e=>{let{id:a,username:n,guild_name:r,submitted_at:o}=e;return(0,t.jsxs)("div",{className:v().feedbackCard,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"User:"})," ",n," ",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Server:"})," ",r||"Unknown"," ",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Submitted:"})," ",new Date(o).toLocaleString()]}),(0,t.jsxs)("div",{className:v().actions,children:[(0,t.jsx)("button",{className:v().iconButtonView,onClick:()=>b(a),title:"View Feedback",children:"\uD83D\uDD0D"}),(0,t.jsx)("button",{className:v().iconButtonDelete,onClick:()=>h(a),title:"Delete Feedback",children:"\uD83D\uDDD1️"})]})]},a)})}),f&&(0,t.jsx)(d,{message:"Are you sure you want to delete this feedback?",onConfirm:()=>m(f),onCancel:()=>h(null)})]})]})}},40291:function(e,a,n){"use strict";n.d(a,{Z:function(){return i}});var t=n(57437),r=n(8792),o=n(47907),l=n(65515),s=n.n(l);function i(){let e=(0,o.usePathname)();return(0,t.jsx)("div",{className:s().sidebar,children:[{href:"/developer",label:"\uD83D\uDCCA Dashboard"},{href:"/developer/servers",label:"\uD83D\uDEE1 Servers"},{href:"/developer/users",label:"\uD83D\uDC65 Users"},{href:"/developer/dev-users",label:"\uD83E\uDDE0 Dev Users"},{href:"/developer/feedback",label:"\uD83D\uDCAC Feedback"},{href:"/servers",label:"\uD83D\uDD19 Back to User Panel"}].map(a=>(0,t.jsx)(r.default,{href:a.href,className:"".concat(s().link," ").concat(e===a.href?s().active:""),children:a.label},a.href))})}},43152:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return c}});var t=n(57437),r=n(71126),o=n(2265),l=n(47907),s=n(83041),i=n.n(s);function c(){var e,a,n,s;let{data:c,status:d}=(0,r.useSession)(),u=(0,l.useRouter)(),v=(0,l.usePathname)(),[_,f]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[b,m]=(0,o.useState)(!1),[D,x]=(0,o.useState)(""),[k,j]=(0,o.useState)(null),[g,N]=(0,o.useState)([]),[B,w]=(0,o.useState)(""),C=(0,o.useRef)(null),F=null==v?void 0:v.startsWith("/developer"),S=(()=>{let e=null==v?void 0:v.split("/");if(!e||e.length<3)return null;let[a,n,t]=e;return["dashboard","applications","settings"].includes(n)&&/^\d+$/.test(t)?t:null})();if((0,o.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,o.useEffect)(()=>{(async()=>{var e;if(!(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id)){m(!0);return}try{let e=await fetch("/api/is-dev-user?userId=".concat(c.user.id)),a=await e.json();p(a.isDev||!1)}catch(e){console.error("\uD83D\uDD25 Failed to check dev access:",e)}finally{m(!0)}})()},[null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id]),(0,o.useEffect)(()=>{(async()=>{if(!S){""!==D&&x("");return}if("authenticated"===d&&(null==c?void 0:c.accessToken))try{let e=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:"Bearer ".concat(c.accessToken)}}),a=(await e.json()).find(e=>e.id===S);a&&x(a.name)}catch(e){console.error("⚠️ Failed to fetch guild name:",e)}})()},[S,null==c?void 0:c.accessToken,d]),(0,o.useEffect)(()=>{(async function(){var e;if(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id)try{let e=await fetch("/api/developer/current-user"),a=e.ok?await e.json():null;j(a);let n=await fetch("/api/developer/plans"),t=n.ok?await n.json():[];N(t)}catch(e){console.error("Failed to fetch user or plans:",e)}})()},[null==c?void 0:null===(a=c.user)||void 0===a?void 0:a.id]),(0,o.useEffect)(()=>{if(!(null==k?void 0:k.expiration_date)){w("");return}function e(){let e=new Date,a=new Date(k.expiration_date)-e;if(a<=0){w("Expired");return}let n=Math.floor(a/31536e6),t=Math.floor((a-=31536e6*n)/864e5),r=Math.floor((a-=864e5*t)/36e5),o=Math.floor((a-=36e5*r)/6e4),l=[];n>0&&l.push("".concat(n,"y")),t>0&&l.push("".concat(t,"d")),r>0&&l.push("".concat(r,"h")),l.push("".concat(o,"m")),w(l.join(", "))}e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[null==k?void 0:k.expiration_date]),"loading"===d)return null;let T=D?"Editing Server: ".concat(D):"",E=((null==k?void 0:k.plan)||"Free").trim().toLowerCase(),y=g.find(e=>e.name.trim().toLowerCase()===E);return(0,t.jsxs)("div",{className:i().topbar,children:[(0,t.jsxs)("div",{className:i().logoArea,children:[(0,t.jsx)("img",{src:"/default-icon.jpg",alt:"AppBot Logo",className:i().logoImage}),(0,t.jsx)("span",{className:i().brand,children:"AppBot2.0"})]}),(F||T)&&(0,t.jsx)("div",{className:i().centerText,children:(0,t.jsx)("span",{className:i().guildName,children:F?"Developer Panel":T})}),(0,t.jsxs)("div",{className:i().right,children:[(null==c?void 0:c.user)&&(0,t.jsx)("div",{className:i().avatarWrapper,onClick:()=>f(e=>!e),children:(0,t.jsx)("img",{src:c.user.image,alt:"Profile",className:i().avatar})}),(null==c?void 0:c.user)&&_&&(0,t.jsxs)("div",{className:i().dropdown,ref:C,children:[(0,t.jsxs)("div",{className:i().userInfoDropdown,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"User:"})," ",(null==k?void 0:k.username)||c.user.name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Plan:"})," ",(null==y?void 0:y.name)||(null==k?void 0:k.plan)||"Free"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Max Forms:"})," ",null!==(n=null==y?void 0:y.max_forms)&&void 0!==n?n:"N/A"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Max Questions:"})," ",null!==(s=null==y?void 0:y.max_questions)&&void 0!==s?s:"N/A"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Time Remaining:"}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{children:B||"N/A"})]})]}),(0,t.jsx)("a",{href:"https://discord.gg/svHdVh2Bff",target:"_blank",rel:"noopener noreferrer",className:i().devButton,style:{textAlign:"center"},children:"\uD83D\uDD17 Join Support Server"}),"/servers"!==v&&(0,t.jsx)("button",{className:i().devButton,onClick:()=>u.push("/servers"),children:"\uD83D\uDD01 Switch Servers"}),h&&(0,t.jsx)("button",{className:i().devButton,onClick:()=>u.push("/developer/dashboard"),children:"\uD83D\uDEE0 Developer Panel"}),(0,t.jsx)("button",{className:i().logout,onClick:()=>(0,r.signOut)({callbackUrl:"/home"}),children:"\uD83D\uDCD5 Log out"})]})]})]})}},41182:function(e){e.exports={container:"DeveloperFeedback_container__Cr17y",mainContent:"DeveloperFeedback_mainContent__uMOpn",title:"DeveloperFeedback_title__43UdE",error:"DeveloperFeedback_error__XlzFq",feedbackList:"DeveloperFeedback_feedbackList__tgNpd",feedbackCard:"DeveloperFeedback_feedbackCard__5w_5K",actions:"DeveloperFeedback_actions__X_h6y",viewBtn:"DeveloperFeedback_viewBtn__jTqyL",deleteBtn:"DeveloperFeedback_deleteBtn__LFL_s",iconButton:"DeveloperFeedback_iconButton__NThTk",icon:"DeveloperFeedback_icon__8BaBV",iconButtonView:"DeveloperFeedback_iconButtonView__bmPh4",iconButtonDelete:"DeveloperFeedback_iconButtonDelete__BjR62"}},47744:function(e){e.exports={backdrop:"ConfirmModal_backdrop__ejw7k",modal:"ConfirmModal_modal__Mma3T",buttons:"ConfirmModal_buttons__On1VR",confirmBtn:"ConfirmModal_confirmBtn__OojxI",cancelBtn:"ConfirmModal_cancelBtn__R4fKa"}},65515:function(e){e.exports={sidebar:"DevSidebar_sidebar__qHBa4",link:"DevSidebar_link__oek2p",active:"DevSidebar_active__0v92e",containerWithSidebar:"DevSidebar_containerWithSidebar__XnQA3"}},83041:function(e){e.exports={topbar:"Topbar_topbar__V0QGl",right:"Topbar_right__Jj2ao",logoArea:"Topbar_logoArea__forZL",logoImage:"Topbar_logoImage__LJuRd",brand:"Topbar_brand__3hSuU",avatarWrapper:"Topbar_avatarWrapper__5Bf2P",avatar:"Topbar_avatar__Eq_S3",dropdown:"Topbar_dropdown__HJUG8",fadeIn:"Topbar_fadeIn__o0Bh1",name:"Topbar_name__eFLUk",logout:"Topbar_logout__u1BV7",devButton:"Topbar_devButton__28Bss",centerText:"Topbar_centerText__7McvY",guildName:"Topbar_guildName__av6yP",userInfoDropdown:"Topbar_userInfoDropdown__dVogq"}}},function(e){e.O(0,[126,901,971,69,744],function(){return e(e.s=94551)}),_N_E=e.O()}]);