(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245,152],{32149:function(e,a,t){Promise.resolve().then(t.bind(t,87074))},95601:function(e,a){"use strict";function t(){return null}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return t}}),("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},87074:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var n=t(57437),s=t(2265),r=t(47907),c=t(95601),l=t.n(c),o=t(59544),i=t(43152),d=t(31128),u=t.n(d);function b(){let e=(0,r.useRouter)(),{guild_id:a}=(0,r.useParams)(),[t,c]=(0,s.useState)(!1),[d,b]=(0,s.useState)(""),[_,f]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,v]=(0,s.useState)(""),[k,x]=(0,s.useState)(!1),[j,g]=(0,s.useState)([]);(0,s.useEffect)(()=>{a&&D()},[a]),(0,s.useEffect)(()=>{a?document.title="Feedback - ".concat(a," - AppBot 2.0"):document.title="Feedback - AppBot 2.0"},[a]);let D=async()=>{try{let e=await fetch("/api/feedback/".concat(a));if(e.ok){let a=await e.json();g(a)}else g([])}catch(e){g([])}},F=async e=>{if(e.preventDefault(),m(""),v(""),!d.trim()||!_.trim()){m("Both fields are required.");return}x(!0);try{let e=await fetch("/api/feedback/".concat(a,"/insert"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guild_id:a,username:d.trim(),feedback:_.trim()})});if(e.ok)v("Feedback submitted successfully! Thank you."),b(""),f(""),c(!1),D();else{let a=await e.json();m(a.message||"Failed to submit feedback.")}}catch(e){m("Failed to submit feedback.")}x(!1)},N=t=>{e.push("/feedback/".concat(a,"/").concat(t))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{children:a?"Feedback - ".concat(a," - AppBot 2.0"):"Feedback - AppBot 2.0"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("div",{className:u().container,children:[(0,n.jsx)(o.default,{}),(0,n.jsxs)("div",{className:u().mainContent,children:[(0,n.jsx)(i.default,{}),(0,n.jsxs)("div",{className:u().feedbackHeader,children:[(0,n.jsx)("h1",{className:u().title,children:"\uD83D\uDCAC Feedback"}),!t&&(0,n.jsx)("button",{className:u().createButton,onClick:()=>{c(!0),m(""),v("")},title:"Add Feedback",children:"➕"})]}),(0,n.jsxs)("div",{className:u().wrapper,children:[p&&(0,n.jsx)("p",{className:"".concat(u().message," ").concat(u().success),children:p}),h&&(0,n.jsx)("p",{className:"".concat(u().message," ").concat(u().error),children:h}),t&&(0,n.jsxs)("form",{className:u().form,onSubmit:F,noValidate:!0,children:[(0,n.jsx)("label",{htmlFor:"username",className:u().label,children:"Username"}),(0,n.jsx)("input",{id:"username",type:"text",className:u().input,placeholder:"Your username",value:d,onChange:e=>b(e.target.value),required:!0,disabled:k}),(0,n.jsx)("label",{htmlFor:"feedback",className:u().label,children:"Feedback"}),(0,n.jsx)("textarea",{id:"feedback",className:u().textarea,placeholder:"Your feedback...",value:_,onChange:e=>f(e.target.value),required:!0,disabled:k}),(0,n.jsxs)("div",{className:u().buttons,children:[(0,n.jsx)("button",{type:"submit",className:u().buttonSubmit,disabled:k,children:k?"Submitting...":"Submit"}),(0,n.jsx)("button",{type:"button",className:u().buttonCancel,onClick:()=>{c(!1),m(""),v("")},disabled:k,children:"Cancel"})]})]})]}),!t&&0===j.length&&(0,n.jsx)("p",{className:u().noFeedbackMessage,children:"No feedback submitted yet."}),!t&&j.length>0&&(0,n.jsx)("div",{className:u().feedbackListContainer,children:(0,n.jsx)("div",{className:u().feedbackList,children:j.map(e=>(0,n.jsxs)("div",{className:u().feedbackCard,children:[(0,n.jsxs)("div",{className:u().feedbackInfo,children:[(0,n.jsx)("span",{className:u().feedbackUsername,children:e.username}),(0,n.jsx)("span",{className:u().feedbackDate,children:new Date(e.submitted_at).toLocaleString()})]}),(0,n.jsx)("button",{className:u().viewButton,onClick:()=>N(e.id),title:"View Feedback",children:"\uD83D\uDD0D"})]},e.id))})})]})]})]})}},59544:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return o}});var n=t(57437),s=t(8792),r=t(92154),c=t.n(r),l=t(47907);function o(){let{guild_id:e}=(0,l.useParams)(),a=(0,l.usePathname)();return(0,n.jsx)("div",{className:c().sidebar,children:[{href:"/dashboard/".concat(e),label:"\uD83D\uDCCB Forms"},{href:"/applications/".concat(e),label:"\uD83D\uDCDD Applications"},{href:"/feedback/".concat(e),label:"\uD83D\uDCAC Feedback"},{href:"/settings/".concat(e),label:"⚙️ Settings"}].map(e=>(0,n.jsx)(s.default,{href:e.href,className:"".concat(c().link," ").concat(a.startsWith(e.href)?c().active:""),children:e.label},e.href))})}},43152:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return i}});var n=t(57437),s=t(71126),r=t(2265),c=t(47907),l=t(83041),o=t.n(l);function i(){var e,a,t,l;let{data:i,status:d}=(0,s.useSession)(),u=(0,c.useRouter)(),b=(0,c.usePathname)(),[_,f]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!1),[k,x]=(0,r.useState)(""),[j,g]=(0,r.useState)(null),[D,F]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),S=(0,r.useRef)(null),C=null==b?void 0:b.startsWith("/developer"),y=(()=>{let e=null==b?void 0:b.split("/");if(!e||e.length<3)return null;let[a,t,n]=e;return["dashboard","applications","settings"].includes(t)&&/^\d+$/.test(n)?n:null})();if((0,r.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{(async()=>{var e;if(!(null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.id)){v(!0);return}try{let e=await fetch("/api/is-dev-user?userId=".concat(i.user.id)),a=await e.json();m(a.isDev||!1)}catch(e){console.error("\uD83D\uDD25 Failed to check dev access:",e)}finally{v(!0)}})()},[null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.id]),(0,r.useEffect)(()=>{(async()=>{if(!y){""!==k&&x("");return}if("authenticated"===d&&(null==i?void 0:i.accessToken))try{let e=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:"Bearer ".concat(i.accessToken)}}),a=(await e.json()).find(e=>e.id===y);a&&x(a.name)}catch(e){console.error("⚠️ Failed to fetch guild name:",e)}})()},[y,null==i?void 0:i.accessToken,d]),(0,r.useEffect)(()=>{(async function(){var e;if(null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.id)try{let e=await fetch("/api/developer/current-user"),a=e.ok?await e.json():null;g(a);let t=await fetch("/api/developer/plans"),n=t.ok?await t.json():[];F(n)}catch(e){console.error("Failed to fetch user or plans:",e)}})()},[null==i?void 0:null===(a=i.user)||void 0===a?void 0:a.id]),(0,r.useEffect)(()=>{if(!(null==j?void 0:j.expiration_date)){w("");return}function e(){let e=new Date,a=new Date(j.expiration_date)-e;if(a<=0){w("Expired");return}let t=Math.floor(a/31536e6),n=Math.floor((a-=31536e6*t)/864e5),s=Math.floor((a-=864e5*n)/36e5),r=Math.floor((a-=36e5*s)/6e4),c=[];t>0&&c.push("".concat(t,"y")),n>0&&c.push("".concat(n,"d")),s>0&&c.push("".concat(s,"h")),c.push("".concat(r,"m")),w(c.join(", "))}e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[null==j?void 0:j.expiration_date]),"loading"===d)return null;let T=k?"Editing Server: ".concat(k):"",B=((null==j?void 0:j.plan)||"Free").trim().toLowerCase(),P=D.find(e=>e.name.trim().toLowerCase()===B);return(0,n.jsxs)("div",{className:o().topbar,children:[(0,n.jsxs)("div",{className:o().logoArea,children:[(0,n.jsx)("img",{src:"/default-icon.jpg",alt:"AppBot Logo",className:o().logoImage}),(0,n.jsx)("span",{className:o().brand,children:"AppBot2.0"})]}),(C||T)&&(0,n.jsx)("div",{className:o().centerText,children:(0,n.jsx)("span",{className:o().guildName,children:C?"Developer Panel":T})}),(0,n.jsxs)("div",{className:o().right,children:[(null==i?void 0:i.user)&&(0,n.jsx)("div",{className:o().avatarWrapper,onClick:()=>f(e=>!e),children:(0,n.jsx)("img",{src:i.user.image,alt:"Profile",className:o().avatar})}),(null==i?void 0:i.user)&&_&&(0,n.jsxs)("div",{className:o().dropdown,ref:S,children:[(0,n.jsxs)("div",{className:o().userInfoDropdown,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"User:"})," ",(null==j?void 0:j.username)||i.user.name]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Plan:"})," ",(null==P?void 0:P.name)||(null==j?void 0:j.plan)||"Free"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Forms:"})," ",null!==(t=null==P?void 0:P.max_forms)&&void 0!==t?t:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Questions:"})," ",null!==(l=null==P?void 0:P.max_questions)&&void 0!==l?l:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Time Remaining:"}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:N||"N/A"})]})]}),(0,n.jsx)("a",{href:"https://discord.gg/svHdVh2Bff",target:"_blank",rel:"noopener noreferrer",className:o().devButton,style:{textAlign:"center"},children:"\uD83D\uDD17 Join Support Server"}),"/servers"!==b&&(0,n.jsx)("button",{className:o().devButton,onClick:()=>u.push("/servers"),children:"\uD83D\uDD01 Switch Servers"}),h&&(0,n.jsx)("button",{className:o().devButton,onClick:()=>u.push("/developer/dashboard"),children:"\uD83D\uDEE0 Developer Panel"}),(0,n.jsx)("button",{className:o().logout,onClick:()=>(0,s.signOut)({callbackUrl:"/home"}),children:"\uD83D\uDCD5 Log out"})]})]})]})}},31128:function(e){e.exports={container:"Feedback_container__Q6NFu",mainContent:"Feedback_mainContent__8x64O",wrapper:"Feedback_wrapper__vqGH5",feedbackHeader:"Feedback_feedbackHeader__lFsU2",title:"Feedback_title__F_ghJ",createButton:"Feedback_createButton__5PRkK",message:"Feedback_message__wIreL",success:"Feedback_success__kPaRE",error:"Feedback_error__GmM9f",form:"Feedback_form__R0uUP",label:"Feedback_label__5PUh1",input:"Feedback_input__XeE8M",textarea:"Feedback_textarea__cI_0j",buttons:"Feedback_buttons__lIepX",buttonSubmit:"Feedback_buttonSubmit__00mAC",buttonCancel:"Feedback_buttonCancel__Zio0E",noFeedbackMessage:"Feedback_noFeedbackMessage__lvr9n",feedbackListContainer:"Feedback_feedbackListContainer__hKMYx",feedbackList:"Feedback_feedbackList__tFXWc",feedbackCard:"Feedback_feedbackCard__oH9zi",feedbackInfo:"Feedback_feedbackInfo__VFPmw",feedbackUsername:"Feedback_feedbackUsername__w8KyR",feedbackDate:"Feedback_feedbackDate___PkUO",viewButton:"Feedback_viewButton__3wqxj"}},92154:function(e){e.exports={sidebar:"DashboardSidebar_sidebar__IHntr",link:"DashboardSidebar_link__X6mrT",active:"DashboardSidebar_active__PW97o",containerWithSidebar:"DashboardSidebar_containerWithSidebar__Hsv_u"}},83041:function(e){e.exports={topbar:"Topbar_topbar__V0QGl",right:"Topbar_right__Jj2ao",logoArea:"Topbar_logoArea__forZL",logoImage:"Topbar_logoImage__LJuRd",brand:"Topbar_brand__3hSuU",avatarWrapper:"Topbar_avatarWrapper__5Bf2P",avatar:"Topbar_avatar__Eq_S3",dropdown:"Topbar_dropdown__HJUG8",fadeIn:"Topbar_fadeIn__o0Bh1",name:"Topbar_name__eFLUk",logout:"Topbar_logout__u1BV7",devButton:"Topbar_devButton__28Bss",centerText:"Topbar_centerText__7McvY",guildName:"Topbar_guildName__av6yP",userInfoDropdown:"Topbar_userInfoDropdown__dVogq"}}},function(e){e.O(0,[126,901,971,69,744],function(){return e(e.s=32149)}),_N_E=e.O()}]);