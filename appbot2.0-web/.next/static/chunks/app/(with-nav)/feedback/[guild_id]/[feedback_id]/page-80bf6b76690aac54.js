(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156,152],{20177:function(e,a,t){Promise.resolve().then(t.bind(t,63249))},95601:function(e,a){"use strict";function t(){return null}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return t}}),("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},63249:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var n=t(57437),r=t(47907),s=t(2265),o=t(95601),i=t.n(o),l=t(59544),c=t(43152),d=t(65414),u=t.n(d);function f(){let e=(0,r.useRouter)(),{guild_id:a,feedback_id:t}=(0,r.useParams)(),[o,d]=(0,s.useState)(null),[f,_]=(0,s.useState)("");return(0,s.useEffect)(()=>{a&&t&&(async()=>{try{let e=await fetch("/api/feedback/".concat(a,"/").concat(t));if(!e.ok)throw Error("Failed to load feedback.");let n=await e.json();d(n)}catch(e){_(e.message)}})()},[a,t]),(0,s.useEffect)(()=>{o?document.title="Feedback from ".concat(o.username," - AppBot 2.0"):document.title="Loading Feedback... - AppBot 2.0"},[o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:o?"Feedback from ".concat(o.username):"Loading Feedback..."}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("div",{className:u().container,children:[(0,n.jsx)(l.default,{}),(0,n.jsxs)("div",{className:u().mainContent,children:[(0,n.jsx)(c.default,{}),(0,n.jsxs)("div",{className:u().content,children:[f&&(0,n.jsx)("p",{className:u().errorMessage,children:f}),!f&&!o&&(0,n.jsx)("p",{className:u().loadingMessage,children:"Loading feedback..."}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("h1",{className:u().title,children:["Feedback from ",o.username]}),(0,n.jsxs)("p",{className:u().subtext,children:["Submitted on ",new Date(o.submitted_at).toLocaleString()]}),(0,n.jsx)("div",{className:u().feedbackBox,children:(0,n.jsx)("p",{children:o.feedback})}),(0,n.jsx)("button",{className:u().backButton,onClick:()=>e.back(),"aria-label":"Back to feedback list",children:"← Back"})]})]})]})]})]})}},59544:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return l}});var n=t(57437),r=t(8792),s=t(92154),o=t.n(s),i=t(47907);function l(){let{guild_id:e}=(0,i.useParams)(),a=(0,i.usePathname)();return(0,n.jsx)("div",{className:o().sidebar,children:[{href:"/dashboard/".concat(e),label:"\uD83D\uDCCB Forms"},{href:"/applications/".concat(e),label:"\uD83D\uDCDD Applications"},{href:"/feedback/".concat(e),label:"\uD83D\uDCAC Feedback"},{href:"/settings/".concat(e),label:"⚙️ Settings"}].map(e=>(0,n.jsx)(r.default,{href:e.href,className:"".concat(o().link," ").concat(a.startsWith(e.href)?o().active:""),children:e.label},e.href))})}},43152:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return c}});var n=t(57437),r=t(71126),s=t(2265),o=t(47907),i=t(83041),l=t.n(i);function c(){var e,a,t,i;let{data:c,status:d}=(0,r.useSession)(),u=(0,o.useRouter)(),f=(0,o.usePathname)(),[_,h]=(0,s.useState)(!1),[p,b]=(0,s.useState)(!1),[v,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(""),[j,k]=(0,s.useState)(null),[D,w]=(0,s.useState)([]),[N,F]=(0,s.useState)(""),S=(0,s.useRef)(null),B=null==f?void 0:f.startsWith("/developer"),T=(()=>{let e=null==f?void 0:f.split("/");if(!e||e.length<3)return null;let[a,t,n]=e;return["dashboard","applications","settings"].includes(t)&&/^\d+$/.test(n)?n:null})();if((0,s.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{(async()=>{var e;if(!(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id)){m(!0);return}try{let e=await fetch("/api/is-dev-user?userId=".concat(c.user.id)),a=await e.json();b(a.isDev||!1)}catch(e){console.error("\uD83D\uDD25 Failed to check dev access:",e)}finally{m(!0)}})()},[null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id]),(0,s.useEffect)(()=>{(async()=>{if(!T){""!==x&&g("");return}if("authenticated"===d&&(null==c?void 0:c.accessToken))try{let e=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:"Bearer ".concat(c.accessToken)}}),a=(await e.json()).find(e=>e.id===T);a&&g(a.name)}catch(e){console.error("⚠️ Failed to fetch guild name:",e)}})()},[T,null==c?void 0:c.accessToken,d]),(0,s.useEffect)(()=>{(async function(){var e;if(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.id)try{let e=await fetch("/api/developer/current-user"),a=e.ok?await e.json():null;k(a);let t=await fetch("/api/developer/plans"),n=t.ok?await t.json():[];w(n)}catch(e){console.error("Failed to fetch user or plans:",e)}})()},[null==c?void 0:null===(a=c.user)||void 0===a?void 0:a.id]),(0,s.useEffect)(()=>{if(!(null==j?void 0:j.expiration_date)){F("");return}function e(){let e=new Date,a=new Date(j.expiration_date)-e;if(a<=0){F("Expired");return}let t=Math.floor(a/31536e6),n=Math.floor((a-=31536e6*t)/864e5),r=Math.floor((a-=864e5*n)/36e5),s=Math.floor((a-=36e5*r)/6e4),o=[];t>0&&o.push("".concat(t,"y")),n>0&&o.push("".concat(n,"d")),r>0&&o.push("".concat(r,"h")),o.push("".concat(s,"m")),F(o.join(", "))}e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[null==j?void 0:j.expiration_date]),"loading"===d)return null;let y=x?"Editing Server: ".concat(x):"",E=((null==j?void 0:j.plan)||"Free").trim().toLowerCase(),C=D.find(e=>e.name.trim().toLowerCase()===E);return(0,n.jsxs)("div",{className:l().topbar,children:[(0,n.jsxs)("div",{className:l().logoArea,children:[(0,n.jsx)("img",{src:"/default-icon.jpg",alt:"AppBot Logo",className:l().logoImage}),(0,n.jsx)("span",{className:l().brand,children:"AppBot2.0"})]}),(B||y)&&(0,n.jsx)("div",{className:l().centerText,children:(0,n.jsx)("span",{className:l().guildName,children:B?"Developer Panel":y})}),(0,n.jsxs)("div",{className:l().right,children:[(null==c?void 0:c.user)&&(0,n.jsx)("div",{className:l().avatarWrapper,onClick:()=>h(e=>!e),children:(0,n.jsx)("img",{src:c.user.image,alt:"Profile",className:l().avatar})}),(null==c?void 0:c.user)&&_&&(0,n.jsxs)("div",{className:l().dropdown,ref:S,children:[(0,n.jsxs)("div",{className:l().userInfoDropdown,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"User:"})," ",(null==j?void 0:j.username)||c.user.name]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Plan:"})," ",(null==C?void 0:C.name)||(null==j?void 0:j.plan)||"Free"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Forms:"})," ",null!==(t=null==C?void 0:C.max_forms)&&void 0!==t?t:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Questions:"})," ",null!==(i=null==C?void 0:C.max_questions)&&void 0!==i?i:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Time Remaining:"}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:N||"N/A"})]})]}),(0,n.jsx)("a",{href:"https://discord.gg/svHdVh2Bff",target:"_blank",rel:"noopener noreferrer",className:l().devButton,style:{textAlign:"center"},children:"\uD83D\uDD17 Join Support Server"}),"/servers"!==f&&(0,n.jsx)("button",{className:l().devButton,onClick:()=>u.push("/servers"),children:"\uD83D\uDD01 Switch Servers"}),p&&(0,n.jsx)("button",{className:l().devButton,onClick:()=>u.push("/developer/dashboard"),children:"\uD83D\uDEE0 Developer Panel"}),(0,n.jsx)("button",{className:l().logout,onClick:()=>(0,r.signOut)({callbackUrl:"/home"}),children:"\uD83D\uDCD5 Log out"})]})]})]})}},65414:function(e){e.exports={container:"FeedbackView_container__q_DNz",mainContent:"FeedbackView_mainContent__AF3fF",content:"FeedbackView_content__yG_U5",title:"FeedbackView_title__Rw0KD",subtext:"FeedbackView_subtext__DN8bN",feedbackBox:"FeedbackView_feedbackBox__lJTZm",backButton:"FeedbackView_backButton__WxwMe",errorMessage:"FeedbackView_errorMessage__rGyES",loadingMessage:"FeedbackView_loadingMessage__cRcny"}},92154:function(e){e.exports={sidebar:"DashboardSidebar_sidebar__IHntr",link:"DashboardSidebar_link__X6mrT",active:"DashboardSidebar_active__PW97o",containerWithSidebar:"DashboardSidebar_containerWithSidebar__Hsv_u"}},83041:function(e){e.exports={topbar:"Topbar_topbar__V0QGl",right:"Topbar_right__Jj2ao",logoArea:"Topbar_logoArea__forZL",logoImage:"Topbar_logoImage__LJuRd",brand:"Topbar_brand__3hSuU",avatarWrapper:"Topbar_avatarWrapper__5Bf2P",avatar:"Topbar_avatar__Eq_S3",dropdown:"Topbar_dropdown__HJUG8",fadeIn:"Topbar_fadeIn__o0Bh1",name:"Topbar_name__eFLUk",logout:"Topbar_logout__u1BV7",devButton:"Topbar_devButton__28Bss",centerText:"Topbar_centerText__7McvY",guildName:"Topbar_guildName__av6yP",userInfoDropdown:"Topbar_userInfoDropdown__dVogq"}}},function(e){e.O(0,[126,901,971,69,744],function(){return e(e.s=20177)}),_N_E=e.O()}]);