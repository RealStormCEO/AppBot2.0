(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[367],{89628:function(e,t,n){Promise.resolve().then(n.bind(n,39347))},47907:function(e,t,n){"use strict";var s=n(15313);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},95601:function(e,t){"use strict";function n(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39347:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(57437),i=n(47907),a=n(2265),c=n(95601),l=n.n(c),o=n(18681),r=n.n(o);function d(){let{guild_id:e}=(0,i.useParams)(),[t,n]=(0,a.useState)([]),[c,o]=(0,a.useState)(!0),[d,u]=(0,a.useState)([]),[p,m]=(0,a.useState)(!1),[h,_]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),x=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/applications/".concat(e)),s=await t.json(),i=[...new Set(s.map(e=>e.form_id))],a=await fetch("/api/forms/titles?ids=".concat(i.join(","))),c=await a.json(),l={};c.forEach(e=>{l[e.id]=e.title});let o=s.map(e=>({...e,form_title:l[e.form_id]||"Unknown Form"}));n(o)}catch(e){console.error("Error loading applications or form titles:",e)}finally{o(!1)}})()},[e]),(0,a.useEffect)(()=>{document.title="Applications - ".concat(e," - AppBot 2.0")},[e]);let b=e=>{switch(e){case 1:return(0,s.jsx)("span",{className:r().statusPending,children:"⏳ Pending"});case 2:return(0,s.jsx)("span",{className:r().statusAccepted,children:"✅ Accepted"});case 3:return(0,s.jsx)("span",{className:r().statusDenied,children:"❌ Denied"});default:return(0,s.jsx)("span",{children:"Unknown"})}},N=async t=>{try{(await fetch("/api/applications/".concat(e,"/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})})).ok?(n(e=>e.filter(e=>e.id!==t)),_(null)):console.error("❌ Failed to delete application")}catch(e){console.error("❌ Delete error:",e)}},A=async()=>{try{(await fetch("/api/applications/".concat(e,"/bulk-delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:d})})).ok?(n(e=>e.filter(e=>!d.includes(e.id))),u([]),m(!1),j(!1)):console.error("❌ Failed to delete selected applications")}catch(e){console.error("❌ Bulk delete error:",e)}},k=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsxs)("title",{children:["Applications - ",e," - AppBot 2.0"]}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("div",{className:r().wrapper,children:[(0,s.jsx)("h1",{className:r().title,children:"\uD83D\uDCC4 Applications"}),c?(0,s.jsx)("p",{children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[d.length>0&&(0,s.jsx)("div",{className:r().bulkActions,children:(0,s.jsx)("button",{className:r().iconButtonDelete,onClick:()=>j(!0),children:"\uD83D\uDDD1️ Delete Selected"})}),0===t.length?(0,s.jsx)("p",{children:"No applications submitted."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:r().tableHeader,children:[(0,s.jsx)("div",{className:r().checkbox,children:(0,s.jsx)("input",{type:"checkbox",checked:p,onChange:()=>{p?u([]):u(t.map(e=>e.id)),m(!p)}})}),(0,s.jsx)("span",{children:"User"}),(0,s.jsx)("span",{className:r().formColumn,children:"Form"})," ",(0,s.jsx)("span",{className:r().scoreColumn,children:"AI Detection Score"}),(0,s.jsx)("span",{className:r().submittedColumn,children:"Submitted"}),(0,s.jsx)("span",{children:"Status"}),(0,s.jsx)("span",{children:"Actions"})]}),(0,s.jsx)("ul",{className:r().applicationList,children:t.map(t=>(0,s.jsxs)("li",{className:r().applicationCard,children:[(0,s.jsx)("div",{className:r().checkbox,children:(0,s.jsx)("input",{type:"checkbox",checked:d.includes(t.id),onChange:()=>k(t.id)})}),(0,s.jsx)("span",{children:t.username}),(0,s.jsx)("span",{className:r().formColumn,title:t.form_title,children:t.form_title.length>25?t.form_title.slice(0,22)+"...":t.form_title}),(0,s.jsx)("span",{className:r().scoreColumn,children:Math.round(100*t.ai_score).toFixed(1)+"%"}),(0,s.jsx)("span",{className:r().submittedColumn,children:new Date(t.submitted_at).toLocaleString()}),(0,s.jsx)("span",{children:b(t.application_status)}),(0,s.jsxs)("div",{className:r().actions,children:[(0,s.jsx)("button",{className:r().iconButton,onClick:()=>x.push("/applications/".concat(e,"/view/").concat(t.id)),title:"View Application",children:"\uD83D\uDD0D"}),(0,s.jsx)("button",{className:r().iconButtonDelete,onClick:()=>_(t.id),title:"Delete Application",children:"\uD83D\uDDD1️"})]})]},t.id))})]}),null!==h&&(0,s.jsx)("div",{className:r().modalBackdrop,children:(0,s.jsxs)("div",{className:r().modal,children:[(0,s.jsx)("p",{children:"Are you sure you want to delete this application?"}),(0,s.jsxs)("div",{className:r().modalButtons,children:[(0,s.jsx)("button",{className:r().confirm,onClick:()=>N(h),children:"✅ Confirm"}),(0,s.jsx)("button",{className:r().cancel,onClick:()=>_(null),children:"❌ Cancel"})]})]})}),f&&(0,s.jsx)("div",{className:r().modalBackdrop,children:(0,s.jsxs)("div",{className:r().modal,children:[(0,s.jsx)("p",{children:"Are you sure you want to delete all selected applications?"}),(0,s.jsxs)("div",{className:r().modalButtons,children:[(0,s.jsx)("button",{className:r().confirm,onClick:A,children:"✅ Confirm"}),(0,s.jsx)("button",{className:r().cancel,onClick:()=>j(!1),children:"❌ Cancel"})]})]})})]})]})]})}},18681:function(e){e.exports={wrapper:"Applications_wrapper__vVdp6",title:"Applications_title__bxVzq",tableHeader:"Applications_tableHeader__P9D2s",applicationList:"Applications_applicationList__05ThF",applicationCard:"Applications_applicationCard__AhpGr",actions:"Applications_actions__UhkGE",iconButton:"Applications_iconButton__OsoCk",iconButtonDelete:"Applications_iconButtonDelete__YI3hZ",statusPending:"Applications_statusPending__n8lho",statusAccepted:"Applications_statusAccepted__lPi0Y",statusDenied:"Applications_statusDenied__NsVtv",modalBackdrop:"Applications_modalBackdrop__D5bQ0",modal:"Applications_modal__0OjgQ",modalButtons:"Applications_modalButtons__g2T_3",submittedColumn:"Applications_submittedColumn__e8Cdl",scoreColumn:"Applications_scoreColumn__KXTnF",checkbox:"Applications_checkbox__X2GjR",bulkActions:"Applications_bulkActions__9cUgz"}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=89628)}),_N_E=e.O()}]);