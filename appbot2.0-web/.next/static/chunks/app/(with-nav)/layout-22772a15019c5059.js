(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{54926:function(e,n,r){Promise.resolve().then(r.bind(r,66387))},47907:function(e,n,r){"use strict";var t=r(15313);r.o(t,"useParams")&&r.d(n,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(n,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(n,{useRouter:function(){return t.useRouter}})},66387:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return c}});var t=r(57437),u=r(2265),s=r(71126);r(91259);var o=r(47907);function i(e){let{children:n}=e,{data:r,status:t}=(0,s.useSession)(),i=(0,o.useRouter)(),c=(0,o.usePathname)(),[a,l]=(0,u.useState)(!1),h=(0,u.useRef)(!1),d=["/home","/login","/register"],f=(()=>{let e=c.split("/");return e.length>2?e[2]:null})();return((0,u.useEffect)(()=>{if("loading"!==t){if(d.includes(c)){l(!0);return}if("authenticated"!==t||!f){h.current||(h.current=!0,i.push("/home"));return}(async()=>{try{let e=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:"Bearer ".concat(r.accessToken)}});if(!e.ok)throw Error("Discord API error: ".concat(e.status));let n=(await e.json()).find(e=>e.id===f);n&&(8&n.permissions)==8?l(!0):h.current||(h.current=!0,i.push("/home"))}catch(e){console.error("Permission check failed:",e),h.current||(h.current=!0,i.push("/home"))}})()}},[t,null==r?void 0:r.accessToken,f,i]),"loading"!==t&&a)?n:null}function c(e){let{children:n}=e;return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{children:(0,t.jsx)(s.SessionProvider,{children:(0,t.jsx)(i,{children:n})})})})}},91259:function(){}},function(e){e.O(0,[126,971,69,744],function(){return e(e.s=54926)}),_N_E=e.O()}]);