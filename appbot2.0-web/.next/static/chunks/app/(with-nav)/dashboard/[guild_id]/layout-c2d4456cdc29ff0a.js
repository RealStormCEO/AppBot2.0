(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730,152],{49594:function(e,a,r){Promise.resolve().then(r.t.bind(r,2266,23)),Promise.resolve().then(r.bind(r,59544)),Promise.resolve().then(r.bind(r,43152))},59544:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return l}});var n=r(57437),t=r(8792),o=r(92154),s=r.n(o),i=r(47907);function l(){let{guild_id:e}=(0,i.useParams)(),a=(0,i.usePathname)();return(0,n.jsx)("div",{className:s().sidebar,children:[{href:"/dashboard/".concat(e),label:"\uD83D\uDCCB Forms"},{href:"/applications/".concat(e),label:"\uD83D\uDCDD Applications"},{href:"/feedback/".concat(e),label:"\uD83D\uDCAC Feedback"},{href:"/settings/".concat(e),label:"⚙️ Settings"}].map(e=>(0,n.jsx)(t.default,{href:e.href,className:"".concat(s().link," ").concat(a.startsWith(e.href)?s().active:""),children:e.label},e.href))})}},43152:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return d}});var n=r(57437),t=r(71126),o=r(2265),s=r(47907),i=r(83041),l=r.n(i);function d(){var e,a,r,i;let{data:d,status:u}=(0,t.useSession)(),c=(0,s.useRouter)(),h=(0,s.usePathname)(),[_,p]=(0,o.useState)(!1),[v,f]=(0,o.useState)(!1),[b,m]=(0,o.useState)(!1),[D,g]=(0,o.useState)(""),[x,j]=(0,o.useState)(null),[N,w]=(0,o.useState)([]),[T,k]=(0,o.useState)(""),S=(0,o.useRef)(null),y=null==h?void 0:h.startsWith("/developer"),C=(()=>{let e=null==h?void 0:h.split("/");if(!e||e.length<3)return null;let[a,r,n]=e;return["dashboard","applications","settings"].includes(r)&&/^\d+$/.test(n)?n:null})();if((0,o.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,o.useEffect)(()=>{(async()=>{var e;if(!(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id)){m(!0);return}try{let e=await fetch("/api/is-dev-user?userId=".concat(d.user.id)),a=await e.json();f(a.isDev||!1)}catch(e){console.error("\uD83D\uDD25 Failed to check dev access:",e)}finally{m(!0)}})()},[null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id]),(0,o.useEffect)(()=>{(async()=>{if(!C){""!==D&&g("");return}if("authenticated"===u&&(null==d?void 0:d.accessToken))try{let e=await fetch("https://discord.com/api/users/@me/guilds",{headers:{Authorization:"Bearer ".concat(d.accessToken)}}),a=(await e.json()).find(e=>e.id===C);a&&g(a.name)}catch(e){console.error("⚠️ Failed to fetch guild name:",e)}})()},[C,null==d?void 0:d.accessToken,u]),(0,o.useEffect)(()=>{(async function(){var e;if(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.id)try{let e=await fetch("/api/developer/current-user"),a=e.ok?await e.json():null;j(a);let r=await fetch("/api/developer/plans"),n=r.ok?await r.json():[];w(n)}catch(e){console.error("Failed to fetch user or plans:",e)}})()},[null==d?void 0:null===(a=d.user)||void 0===a?void 0:a.id]),(0,o.useEffect)(()=>{if(!(null==x?void 0:x.expiration_date)){k("");return}function e(){let e=new Date,a=new Date(x.expiration_date)-e;if(a<=0){k("Expired");return}let r=Math.floor(a/31536e6),n=Math.floor((a-=31536e6*r)/864e5),t=Math.floor((a-=864e5*n)/36e5),o=Math.floor((a-=36e5*t)/6e4),s=[];r>0&&s.push("".concat(r,"y")),n>0&&s.push("".concat(n,"d")),t>0&&s.push("".concat(t,"h")),s.push("".concat(o,"m")),k(s.join(", "))}e();let a=setInterval(e,6e4);return()=>clearInterval(a)},[null==x?void 0:x.expiration_date]),"loading"===u)return null;let E=D?"Editing Server: ".concat(D):"",L=((null==x?void 0:x.plan)||"Free").trim().toLowerCase(),P=N.find(e=>e.name.trim().toLowerCase()===L);return(0,n.jsxs)("div",{className:l().topbar,children:[(0,n.jsxs)("div",{className:l().logoArea,children:[(0,n.jsx)("img",{src:"/default-icon.jpg",alt:"AppBot Logo",className:l().logoImage}),(0,n.jsx)("span",{className:l().brand,children:"AppBot2.0"})]}),(y||E)&&(0,n.jsx)("div",{className:l().centerText,children:(0,n.jsx)("span",{className:l().guildName,children:y?"Developer Panel":E})}),(0,n.jsxs)("div",{className:l().right,children:[(null==d?void 0:d.user)&&(0,n.jsx)("div",{className:l().avatarWrapper,onClick:()=>p(e=>!e),children:(0,n.jsx)("img",{src:d.user.image,alt:"Profile",className:l().avatar})}),(null==d?void 0:d.user)&&_&&(0,n.jsxs)("div",{className:l().dropdown,ref:S,children:[(0,n.jsxs)("div",{className:l().userInfoDropdown,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"User:"})," ",(null==x?void 0:x.username)||d.user.name]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Plan:"})," ",(null==P?void 0:P.name)||(null==x?void 0:x.plan)||"Free"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Forms:"})," ",null!==(r=null==P?void 0:P.max_forms)&&void 0!==r?r:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Max Questions:"})," ",null!==(i=null==P?void 0:P.max_questions)&&void 0!==i?i:"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Time Remaining:"}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:T||"N/A"})]})]}),(0,n.jsx)("a",{href:"https://discord.gg/svHdVh2Bff",target:"_blank",rel:"noopener noreferrer",className:l().devButton,style:{textAlign:"center"},children:"\uD83D\uDD17 Join Support Server"}),"/servers"!==h&&(0,n.jsx)("button",{className:l().devButton,onClick:()=>c.push("/servers"),children:"\uD83D\uDD01 Switch Servers"}),v&&(0,n.jsx)("button",{className:l().devButton,onClick:()=>c.push("/developer/dashboard"),children:"\uD83D\uDEE0 Developer Panel"}),(0,n.jsx)("button",{className:l().logout,onClick:()=>(0,t.signOut)({callbackUrl:"/home"}),children:"\uD83D\uDCD5 Log out"})]})]})]})}},2266:function(e){e.exports={wrapper:"DashboardLayout_wrapper__kxVD8",body:"DashboardLayout_body__Dt4Qo",main:"DashboardLayout_main__MdP8K",content:"DashboardLayout_content__eC2o4",topbar:"DashboardLayout_topbar__TsClD",container:"DashboardLayout_container__DPHQq"}},92154:function(e){e.exports={sidebar:"DashboardSidebar_sidebar__IHntr",link:"DashboardSidebar_link__X6mrT",active:"DashboardSidebar_active__PW97o",containerWithSidebar:"DashboardSidebar_containerWithSidebar__Hsv_u"}},83041:function(e){e.exports={topbar:"Topbar_topbar__V0QGl",right:"Topbar_right__Jj2ao",logoArea:"Topbar_logoArea__forZL",logoImage:"Topbar_logoImage__LJuRd",brand:"Topbar_brand__3hSuU",avatarWrapper:"Topbar_avatarWrapper__5Bf2P",avatar:"Topbar_avatar__Eq_S3",dropdown:"Topbar_dropdown__HJUG8",fadeIn:"Topbar_fadeIn__o0Bh1",name:"Topbar_name__eFLUk",logout:"Topbar_logout__u1BV7",devButton:"Topbar_devButton__28Bss",centerText:"Topbar_centerText__7McvY",guildName:"Topbar_guildName__av6yP",userInfoDropdown:"Topbar_userInfoDropdown__dVogq"}}},function(e){e.O(0,[126,901,971,69,744],function(){return e(e.s=49594)}),_N_E=e.O()}]);